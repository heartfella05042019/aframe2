<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <title>Loading and Displaying 3D Models in A-Frame</title>

    <script>
        // Prevent scroll zooming
        window.addEventListener('wheel', e => e.preventDefault(), { passive: false });

        // Log player/camera position every 0.5 seconds
        AFRAME.registerComponent('log-position', {
            init: function () {
                this.lastTime = 0;
            },
            tick: function (time) {
                if (time - this.lastTime > 500) {
                    const pos = this.el.object3D.position;

                    console.log(
                        `Player -> X:${pos.x.toFixed(2)}  Y:${pos.y.toFixed(2)}  Z:${pos.z.toFixed(2)}`
                    );

                    this.lastTime = time;
                }
            }
        });
    </script>
</head>

<body>
    <a-scene>

        <!-- Asset Management -->
        <a-assets>
            <img id="sky" src="assets/clear-sunny-sky.jpg">
            <a-asset-item id="castle-scene" src="assets/scene.gltf"></a-asset-item>
            <a-asset-item id="catapult-obj" src="assets/Catapult.obj"></a-asset-item>
            <a-asset-item id="catapult-mtl" src="assets/Catapult.mtl"></a-asset-item>
        </a-assets>

        <!-- Sky Background -->
        <a-sky src="#sky"></a-sky>

        <!-- Player Camera -->
        <a-entity 
            id="player"
            camera
            look-controls
            wasd-controls="acceleration: 50"
            position="0 5 10"
            log-position>
        </a-entity>

        <!-- Castle -->
        <a-entity
            gltf-model="#castle-scene"
            position="0 0 0"
            scale="500 500 500">
        </a-entity>

        <!-- Catapult -->
        <a-entity
            obj-model="obj: #catapult-obj; mtl: #catapult-mtl"
            position="-53.64 0 294.73"
            rotation="0 200 0"
            scale="1 1 1">
        </a-entity>

    </a-scene>
</body>
</html>
